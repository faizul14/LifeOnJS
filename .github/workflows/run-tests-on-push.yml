name: Jalankan ESLint dan Jest saat Push

on:
  push:
    branches:
      - main  # Ganti dengan nama branch yang Anda inginkan

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout kode sumber
      uses: actions/checkout@v2

    - name: Install dependensi
      run: npm install

    - name: Jalankan ESLint
      run: npm run lint

    - name: Jalankan Tes Jest
      run: npm run test --if-present

    - name: Periksa Kode ESLint dan Keluaran Jest
      run: |
        if [[ ${{ steps['Jalankan ESLint'].outcome }} == 'failure' ]]; then
          echo "Kesalahan ESLint, mencegah push ke branch!"
          exit 1
        fi
        if [[ ${{ steps['Jalankan Tes Jest'].outcome }} == 'failure' ]]; then
          echo "Tes Jest gagal, mencegah push ke branch!"
          exit 1
        fi
